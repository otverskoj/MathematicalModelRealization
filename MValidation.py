import numpy as np

# ÐŸÐµÑ€Ð¸Ð¾Ð´, Ð½Ð° ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ðµ ÑÐ¾ÑÑ‚Ð°Ð²Ð»ÑÐµÑ‚ÑÑ Ñ€Ð°ÑÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð² Ñ‡Ð°ÑÐ°Ñ…
Range = 24

# ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ð¸Ð½Ñ‚ÐµÑ€Ð²Ð°Ð»Ð¾Ð²
N_times = 24

# Ð¨Ð°Ð³ Ð´Ð¸ÑÐºÑ€ÐµÑ‚Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð´Ð¸ÑÐ¿ÐµÑ‚Ñ‡ÐµÑ€ÑÐºÐ¾Ð³Ð¾ Ñ€Ð°ÑÐ¿Ð¸ÑÐ°Ð½Ð¸Ñ
delta_t = Range / N_times

# ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ð¸Ð½Ñ‚ÐµÑ€Ð²Ð°Ð»Ð¾Ð² Ð´Ð»Ñ Ñ€Ð°ÑÑ‡Ñ‘Ñ‚Ð° Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾Ð³Ð¾ Ð¸Ð½Ñ‚ÐµÑ€Ð²Ð°Ð»Ð°
N_tau = 60

# Ð¨Ð°Ð³ Ð´Ð¸ÑÐºÑ€ÐµÑ‚Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾Ð³Ð¾ Ð¸Ð½Ñ‚ÐµÑ€Ð²Ð°Ð»Ð°
delta_tau = delta_t / N_tau

# Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´ÑÑ‚Ð²Ð°
factory_struct = {
    "pipe": [6, 7, 8, 9, 10, 11, 12, 20, 21, 22, 23, 25, 26],
    "input": [0, 1, 2, 3, 4, 5],
    "pump": [],  # Ð§Ñ‚Ð¾ ÑÑ‚Ð¾????
    "tank": [13, 14, 15, 16, 17, 18, 19],
    "pipe_c": [],  # Ð§Ñ‚Ð¾ ÑÑ‚Ð¾????
    "tank_g": [27, 28, 29, 30],
    "stock": [31, 32]
}

N_inputs = len(factory_struct["input"])
N_stocks = len(factory_struct["stock"])
N_tanks_g = len(factory_struct["tank_g"])
N_pipes = len(factory_struct["pipe"])
N_tanks = len(factory_struct["tank"])

N_objects = N_inputs + N_stocks + N_tanks_g + N_pipes + N_tanks
N_all_tanks = N_tanks + N_tanks_g + N_stocks

# Ð”Ð²ÑƒÐ¼ÐµÑ€Ð½Ñ‹Ð¹ Ð¼Ð°ÑÑÐ¸Ð² ÑÐ²ÑÐ·ÐµÐ¹ Ð¼ÐµÐ¶Ð´Ñƒ Ð¾Ð±ÑŠÐµÐºÑ‚Ð°Ð¼Ð¸
L = [(0, 6), (0, 7), (1, 8), (2, 9), (3, 10), (4, 11), (5, 12),
     (6, 13), (7, 14), (8, 15), (9, 19), (10, 16), (11, 17), (12, 18),
     (13, 20), (13, 21), (13, 22), (13, 23), (14, 20), (14, 21), (14, 22), (14, 23), (15, 20), (15, 21), (15, 22), (15, 23), (16, 20), (16, 21), (16, 22), (16, 23), (17, 20), (17, 21), (17, 22), (17, 23), (18, 20), (18, 21), (18, 22), (18, 23), (19, 20), (19, 21), (19, 22), (19, 23),
     (20, 24), (21, 24), (22, 24), (23, 24),
     (24, 25), (24, 26),
     (25, 27), (25, 28), (26, 29), (26, 30),
     (27, 31), (28, 31), (29, 32), (30, 32)]

# ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ ÑÐ²ÑÐ·ÐµÐ¹ Ð¼ÐµÐ¶Ð´Ñƒ Ð¾Ð±ÑŠÐµÐºÑ‚Ð°Ð¼Ð¸
# FIX ME!!!
N_lines = len(L)

# Ð’ÑÐµ Ð¾Ð±ÑŠÐµÐºÑ‚Ñ‹, ÑÐ²Ð»ÑÑŽÑ‰Ð¸ÐµÑÑ Ñ€ÐµÐ·ÐµÑ€Ð²ÑƒÐ°Ñ€Ð°Ð¼Ð¸
All_tanks = factory_struct["tank_g"] + factory_struct["tank"] + factory_struct["stock"]
print(All_tanks)
# ÐœÐ°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð°Ñ ÑÐºÐ¾Ñ€Ð¾ÑÑ‚ÑŒ Ð¿Ð¾Ñ‚Ð¾ÐºÐ° Ð¼ÐµÐ¶Ð´Ñƒ Ð¾Ð±ÑŠÐµÐºÑ‚Ð°Ð¼Ð¸
f_max = np.zeros((N_lines, N_times))

# Ð”Ð¾Ð»Ñ ÑÐºÐ¾Ñ€Ð¾ÑÑ‚Ð¸ Ð¿Ð¾Ñ‚Ð¾ÐºÐ° Ð¾Ñ‚ Ð¼Ð°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð¾ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾Ð¹
x = np.zeros((N_lines, N_times))

# Ð¡ÐºÐ¾Ñ€Ð¾ÑÑ‚ÑŒ Ð¿Ð¾Ñ‚Ð¾ÐºÐ° Ð¼ÐµÐ¶Ð´Ñƒ Ð¾Ð±ÑŠÐµÐºÑ‚Ð°Ð¼Ð¸
f = np.zeros((N_lines, N_times))

# ÐŸÐ¾ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð½Ð¾Ðµ ÑƒÐ¼Ð½Ð¾Ð¶ÐµÐ½Ð¸Ðµ
f = f_max * x
# Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¼Ð°ÑÑÐ¸Ð²Ð° f
for j in range(N_times):
  f[0][j] = 14.2
  f[1][j] = 14.2
  f[7][j] = 14.2
  f[8][j] = 14.2
  f[2][j] = 62
  f[9][j] = 62
  f[3][j] = 16.6
  f[10][j] = 16.6
  f[4][j] = 81.9
  f[11][j] = 81.9
  f[5][j] = 91.2
  f[12][j] = 91.2
  f[6][j] = 148.9
  f[13][j] = 148.9

for j in range(6, 16):
  f[14][j] = 0.7 #Ð¸Ð· 42 ÑÐ²ÑÐ·Ð¸ Ñ€Ð°Ð·Ð´ÐµÐ»ÑÐµÐ¼
  f[42][j] = 1.4
  f[18][j] = 0.7

  f[23][j] = 28.2
  f[43][j] = 28.2

  f[28][j] = 148.95
  f[32][j] = 148.95
  f[44][j] = 297.9

  f[37][j] = 152.5
  f[45][j] = 152.5

  f[46][j] = 480
  f[48][j] = 480

for j in range(16, 24):
  f[14][j] = 18
  f[42][j] = 18

  f[23][j] = 10.1
  f[39][j] = 10.1
  f[43][j] = 20.2

  f[28][j] = 146.7
  f[44][j] = 146.7

  f[33][j] = 32.55
  f[37][j] = 32.55
  f[45][j] = 65.1

  f[47][j] = 250
  f[50][j] = 250

for j in range(19, 24):
  f[52][j] = 960

# ÐœÐ½Ð¾Ð¶ÐµÑÑ‚Ð²Ð¾ Ð¿Ð°Ñ€ ÑÐ²ÑÐ·ÐµÐ¹, Ð¿Ñ€Ð¾Ð¼ÐµÐ¶ÑƒÑ‚Ð¾Ñ‡Ð½Ñ‹Ð¹ Ð¾Ð±ÑŠÐµÐºÑ‚ ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ñ… ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ñ€ÐµÐ·ÐµÑ€Ð²ÑƒÐ°Ñ€Ð¾Ð¼
D = []

for i in range(len(L)):
    if L[i][1] in All_tanks:
        for j in range(i, len(L)):
            if L[i][1] == L[j][0]:
                D.append((i, j))

# ÐœÐ°Ñ‚Ñ€Ð¸Ñ†Ð° Ð¾ÑÑ‚Ð°Ñ‚ÐºÐ¾Ð² Ð½Ð° ÐºÐ¾Ð½ÐµÑ† t-Ð³Ð¾ Ð¸Ð½Ñ‚ÐµÑ€Ð²Ð°Ð»Ð° Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ Ð² i-Ð¾Ð¼ Ñ€ÐµÐ·ÐµÑ€Ð²ÑƒÐ°Ñ€Ðµ
M = np.zeros((N_all_tanks, N_times))

M[0][0] = 580
M[1][0] = 789
M[2][0] = 632
M[3][0] = 689
M[4][0] = 124
M[5][0] = 206
M[6][0] = 750
M[7][0] = 820
M[8][0] = 200
M[9][0] = 1212
M[10][0] = 1212

## ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð¸Ð¼ÐµÑŽÑ‰ÐµÐ¹ÑÑ Ð¼Ð°ÑÑÑ‹ Ð² ð‘–-Ð¼ Ð¾Ð±ÑŠÐµÐºÑ‚Ðµ (ÑÐ²Ð»ÑÑŽÑ‰ÐµÐ¼ÑÑ Ñ€ÐµÐ·ÐµÑ€Ð²ÑƒÐ°Ñ€Ð¾Ð¼) Ð½Ð° ÐºÐ¾Ð½ÐµÑ† ð‘¡-Ð³Ð¾ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾Ð³Ð¾ Ð¸Ð½Ñ‚ÐµÑ€Ð²Ð°Ð»Ð°:
## Ð”Ð»Ñ ÑÐ»ÑƒÑ‡Ð°Ñ, ÐºÐ¾Ð³Ð´Ð° Ð¾Ð´Ð¸Ð½ Ð²Ñ…Ð¾Ð´ Ð¸ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ð²Ñ‹Ñ…Ð¾Ð´Ð¾Ð²
#for i in All_tanks:
#    for t in range(1, N_times):
#        total_out = 0
#        for item in D:
#            # ÐÐ¾Ð¼ÐµÑ€ Ð¾Ð±ÑŠÐµÐºÑ‚Ð° Ð½Ð° Ñ‚ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸Ñ‡ÐµÑÐºÐ¾Ð¹ ÑÑ…ÐµÐ¼Ðµ
#            obj = L[item[0]][1]
#            if obj == i:
#              need_connect = item
#              total_out += (f[item[1]][t] * delta_t)
#        M[All_tanks.index(i)][t] = (total_out + f[need_connect[0]][t])\
#        + M[All_tanks.index(i)][t - 1]

##print(M)
#print(D)

# ÐœÐ°Ñ‚Ñ€Ð¸Ñ†Ð° Ð¼Ð°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð¾Ð¹ Ð¼Ð°ÑÑÑ‹ Ð¾ÑÑ‚Ð°Ñ‚ÐºÐ¾Ð² Ð² i-Ð¾Ð¼ Ñ€ÐµÐ·ÐµÑ€Ð²ÑƒÐ°Ñ€Ðµ
M_max = [15000 for i in range(N_tanks + N_tanks_g)]

# ÐœÐ°Ñ‚Ñ€Ð¸Ñ†Ð° Ð¼Ð¸Ð½Ð¸Ð¼Ð°Ð»ÑŒÐ½Ð¾Ð¹ Ð¼Ð°ÑÑÑ‹ Ð¾ÑÑ‚Ð°Ñ‚ÐºÐ¾Ð² Ð² i-Ð¾Ð¼ Ñ€ÐµÐ·ÐµÑ€Ð²ÑƒÐ°Ñ€Ðµ
M_min = [150 for i in range(N_tanks + N_tanks_g)]

# ÐžÐ³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ñ Ð¿Ð¾ Ð¾ÑÑ‚Ð°Ñ‚ÐºÐ°Ð¼ Ð² Ñ€ÐµÐ·ÐµÑ€Ð²ÑƒÐ°Ñ€Ðµ
stop = False
for t in range(N_times):
  for i in range(N_tanks + N_tanks_g):
    if M[i][t] > M_max[i] or M[i][t] < M_min[i]:
      stop = True
      i_stop = i
      t_stop = t

#if stop:
  #print("Ð’Ñ‹Ñ…Ð¾Ð´ Ð·Ð° Ð´Ð¾Ð¿ÑƒÑÑ‚Ð¸Ð¼Ñ‹Ðµ Ð³Ñ€Ð°Ð½Ð¸Ñ†Ñ‹ Ð¼Ð°ÑÑÑ‹ Ð¾ÑÑ‚Ð°Ñ‚ÐºÐ¾Ð²")
  #print(i_stop)
  #print(t_stop)


# ÐœÐ°ÑÑÐ¸Ð² Ð¼Ð°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð¾Ð¹ Ð¿Ñ€Ð¾Ð¿ÑƒÑÐºÐ½Ð¾Ð¹ ÑÐ¿Ð¾ÑÐ¾Ð±Ð½Ð¾ÑÑ‚Ð¸ Ð² i-Ð¾Ð¹ Ñ‚Ñ€ÑƒÐ±Ðµ
V_max = np.zeros(N_objects)
for i in range(N_objects):
    if i == 25:
        V_max[i] = 480
    elif i == 26:
        V_max[i] = 250
    V_max[i] = 500

# ÐœÐ°ÑÑÐ¸Ð² Ð¼Ð¸Ð½Ð¸Ð¼Ð°Ð»ÑŒÐ½Ð¾Ð¹ Ð¿Ñ€Ð¾Ð¿ÑƒÑÐºÐ½Ð¾Ð¹ ÑÐ¿Ð¾ÑÐ¾Ð±Ð½Ð¾ÑÑ‚Ð¸ Ð² i-Ð¾Ð¹ Ñ‚Ñ€ÑƒÐ±Ðµ
V_min = np.zeros(N_objects)

# ÐžÐ³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ñ Ð²Ñ…Ð¾Ð´ÑÑ‰ÐµÐ³Ð¾ Ð¸ Ð²Ñ‹Ñ…Ð¾Ð´ÑÑ‰ÐµÐ³Ð¾ Ð¿Ð¾Ñ‚Ð¾ÐºÐ° Ð² Ð¾Ð±ÑŠÐµÐºÑ‚
Summa_f_1 = 0; Summa_f_2 = 0
for t in range(N_times):
  for i in range(N_objects):
    for line in range(N_lines):
      if i == L[line][0]: #Ð² Ð½Ð¾Ð¼ÐµÑ€Ðµ ÑÐ²ÑÐ·Ð¸ Ð¿ÐµÑ€Ð²Ñ‹Ð¼ Ð¾Ð±ÑŠÐµÐºÑ‚Ð¾Ð¼ ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ñ€Ð°ÑÑÐ¼Ð°Ñ‚Ñ€Ð¸Ð²Ð°ÐµÐ¼Ñ‹Ð¹ Ð¾Ð±ÑŠÐµÐºÑ‚
        Summa_f_1 += f[line][t]
      if i == L[line][1]: #Ð² Ð½Ð¾Ð¼ÐµÑ€Ðµ ÑÐ²ÑÐ·Ð¸ Ð²Ñ‚Ð¾Ñ€Ñ‹Ð¼ Ð¾Ð±ÑŠÐµÐºÑ‚Ð¾Ð¼ ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ñ€Ð°ÑÑÐ¼Ð°Ñ‚Ñ€Ð¸Ð²Ð°ÐµÐ¼Ñ‹Ð¹ Ð¾Ð±ÑŠÐµÐºÑ‚
        Summa_f_2 += f[line][t]
    if (Summa_f_1 > V_max[i] or Summa_f_1 < V_min[i]) or (Summa_f_2 > V_max[i] or Summa_f_2 < V_min[i]):
      stop = True
      i_stop = i
      t_stop = t

#if stop:
  #print("Ð’Ñ‹Ñ…Ð¾Ð´ Ð·Ð° Ð´Ð¾Ð¿ÑƒÑÑ‚Ð¸Ð¼Ñ‹Ðµ Ð³Ñ€Ð°Ð½Ð¸Ñ†Ñ‹ Ð¿Ñ€Ð¾Ð¿ÑƒÑÐºÐ½Ð¾Ð¹ ÑÐ¿Ð¾ÑÐ¾Ð±Ð½Ð¾ÑÑ‚Ð¸")
  #print(i_stop)
  #print(t_stop)
q_f = 0; q_t = 0
# ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð¸Ð¼ÐµÑŽÑ‰ÐµÐ¹ÑÑ Ð¼Ð°ÑÑÑ‹ Ð² ð‘–-Ð¼ Ð¾Ð±ÑŠÐµÐºÑ‚Ðµ (ÑÐ²Ð»ÑÑŽÑ‰ÐµÐ¼ÑÑ Ñ€ÐµÐ·ÐµÑ€Ð²ÑƒÐ°Ñ€Ð¾Ð¼) Ð½Ð° ÐºÐ¾Ð½ÐµÑ† ð‘¡-Ð³Ð¾ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾Ð³Ð¾ Ð¸Ð½Ñ‚ÐµÑ€Ð²Ð°Ð»Ð°:
# Ð”Ð»Ñ ÑÐ»ÑƒÑ‡Ð°Ñ, ÐºÐ¾Ð³Ð´Ð° Ð¾Ð´Ð¸Ð½ Ð²Ñ…Ð¾Ð´ Ð¸ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ð²Ñ‹Ñ…Ð¾Ð´Ð¾Ð²
for i in All_tanks:
  for t in range(1, N_times):
      total_out = 0
      for item in D:
          # ÐÐ¾Ð¼ÐµÑ€ Ð¾Ð±ÑŠÐµÐºÑ‚Ð° Ð½Ð° Ñ‚ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸Ñ‡ÐµÑÐºÐ¾Ð¹ ÑÑ…ÐµÐ¼Ðµ
          obj = L[item[0]][1]
          if obj == i:
            need_connect = item
            total_out += (f[item[1]][t - 1] * delta_t)
      M[All_tanks.index(i)][t] = (f[need_connect[0]][t-1] - total_out)\
      + M[All_tanks.index(i)][t - 1]
      if t in range(6, 16) and i in range(16, 17):
        q_f += f[need_connect[0]][t-1]
        q_t += total_out
        print("f[need_connect[0]][t] = {}".format(f[need_connect[0]][t]))
        print("total_out = {}".format(total_out))
        print("M[All_tanks.index(i)][t] = {}".format(M[All_tanks.index(i)][t]))
        print("i = {}".format(i))
        print("t = {}".format(t))
print(q_f)
print(q_t)

print(M)
#15, 16
# ÐœÐ°ÑÑÐ¸Ð² ÑÐ²ÑÐ·ÐµÐ¹ Ð¸Ð· L, Ð² ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ñ… Ð¿ÐµÑ€Ð²Ñ‹Ð¹ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ ÑÐ²Ð»ÑÐµÑ‚ÑÑ tank_g, Ð° Ð²Ñ‚Ð¾Ñ€Ð¾Ð¹ - stock
lines_gs = [line for line in L if (line[0] in factory_struct["tank_g"]) and (line[1] in factory_struct["stock"])]

M_task = [4800, 2000]
count_M_task = [0 for m in range(N_stocks)]
# Ð’ ÐºÐ°Ð¶Ð´Ñ‹Ð¹ Ð¿ÑƒÐ½ÐºÑ‚ Ð¾Ñ‚Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð´Ð¾Ð»Ð¶Ð½Ð¾ Ð±Ñ‹Ñ‚ÑŒ Ð¿Ð¾ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð¾ Ð·Ð°Ð´Ð°Ð½Ð½Ð¾Ðµ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð½ÐµÑ„Ñ‚ÐµÐ¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ð°
for s in range(N_stocks):
    for w in lines_gs:
        if w[1] == factory_struct["stock"][s]:
            for t in range(N_times):
                count_M_task[s] += f[L.index(w)][t]

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ñ 5Ð³
check = [M_task[s] == count_M_task[s] for s in range(N_stocks)]

for s in range(N_stocks):
  if check[s] == True:
    print("Ð’ {} Ð¿ÑƒÐ½ÐºÑ‚ Ð¾Ñ‚Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð±Ñ‹Ð»Ð¾ Ð¿Ð¾ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð¾ Ð·Ð°Ð´Ð°Ð½Ð½Ð¾Ðµ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð½ÐµÑ„Ñ‚ÐµÐ¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ð°".format(factory_struct["stock"][s]))
  if check[s] == False:
    print("Ð’ {} Ð¿ÑƒÐ½ÐºÑ‚ Ð¾Ñ‚Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð½Ðµ Ð±Ñ‹Ð»Ð¾ Ð¿Ð¾ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð¾ Ð·Ð°Ð´Ð°Ð½Ð½Ð¾Ðµ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð½ÐµÑ„Ñ‚ÐµÐ¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ð°!".format(factory_struct["stock"][s]))


# Ð’ Ñ‚Ð¾Ð²Ð°Ñ€Ð½Ð¾Ð¼ Ñ€ÐµÐ·ÐµÑ€Ð²ÑƒÐ°Ñ€Ðµ Ð½Ð¾Ð¼ÐµÑ€ 1 (27) Ð½Ð° Ð½Ð°Ñ‡Ð°Ð»Ð¾ 23 Ñ‡Ð°ÑÐ° Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ðº Ñ€Ð°Ð²ÐµÐ½ 1540, Ð° Ð½Ðµ 580, ÐºÐ°Ðº Ð² Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ðµ, Ð¿Ð¾Ñ‚Ð¾Ð¼Ñƒ Ñ‡Ñ‚Ð¾ Ð¼Ñ‹ ÑÑ‡Ð¸Ñ‚Ð°ÐµÐ¼ Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ðº Ð½Ð° Ð½Ð°Ñ‡Ð°Ð»Ð¾ Ñ‡Ð°ÑÐ°, Ð° Ð½Ðµ ÐµÐ³Ð¾ ÐºÐ¾Ð½ÐµÑ†, Ð° Ð² Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ðµ Ð¿Ñ€ÐµÐ´ÑÑ‚Ð°Ð²Ð»ÐµÐ½ Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ðº Ð½Ð° Ð½Ð°Ñ‡Ð°Ð»Ð° Ð½ÑƒÐ»ÐµÐ²Ð¾Ð³Ð¾ Ñ‡Ð°ÑÐ° ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ³Ð¾ Ð´Ð½Ñ, ÐºÐ¾Ñ€Ð¾Ñ‡Ðµ, Ð²ÑÐµ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚
